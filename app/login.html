<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="robots" content="index, follow">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="author" content="https://github.com/aaa/">
    <title>덴탈플러스</title>
    <link href="css/fontawesome/css/fontawesome-all.css" rel="stylesheet"> <!-- font awesome 5.* pro -->
    <link rel="stylesheet" href="css/dentalBasic.css">

    <script src="js/jquery-1.12.4.min.js"></script>
    <script src="js/common.js"></script>
    <script src="js/handlebars.min.js"></script>
    <script src="js/dental_ui.js"></script>

</head>
<body>
    <header class="register-header navbar">
        <section class="navbar-section">
            <span onclick="if(history.length>2){ history.back(); } else { location.href='start.html'; }">
                <i class="fal fa-arrow-square-left"></i>
                이전페이지
            </span>
        </section>
        <section class="navbar-section">
            <a href="start.html"><i class="fal fa-home"></i></a>
            <a href="user_panel.html"><i class="fal fa-user-alt"></i></a>
        </section>
    </header>
    <section class="login-section" style="width: 95%;">
        <div class="dental-card">
            <div class="dental-card-header">
                <div class="dental-card-header-title h4" style="margin-bottom: 1.5rem;">로그인 정보 입력</div>
            </div>
            <form id="loginForm">
                <div class="login-section-body">
                    <div class="form-group facebook-login">
                        <i class="fab fa-facebook" style="margin: 0 0.5rem; font-size: 1.2rem;"></i>
                        <span>페이스북으로 로그인 하기</span>
                    </div>
                    <div class="divider" data-content="또는"></div>
                    <div id="bizRegNoStatus"></div>
                    <div class="form-group need-validator">
                        <input class="styled-input d-reg-email" type="email" id="email" name="email" placeholder="이메일 아이디" required>
                        <span class="form-group-icon" hidden><i class="fal fa-check-circle"></i></span>
                        <span class="form-group-underline"></span>
                        <div class="form-group-msg2" hidden></div>
                    </div>
                    <div id="emailStatus"></div> <!-- 요고 모징? -->
                    <div class="form-group">
                        <input class="styled-input d-reg-password" type="password" id="password" name="password" placeholder="비밀번호" >
                        <span class="form-group-icon" hidden><i class="fal fa-check-circle"></i></span>
                        <span class="form-group-underline"></span>
                        <div class="form-group-msg2" hidden></div>
                    </div>
                    <div class="basic">
                        <button type="submit" class="btn btn-primary" >로그인</button>
                        <label style="margin-left: 0.5rem"><input type="checkbox"><span style="margin-left: 0.5rem;">로그인 상태 유지</span></label>
                    </div>
                </div>
    
                <div class="login-section-footer">
                    <div class="checkRegister">
                        <a href="signup.html">
                            <span>아직 회원이 아니세요?</span>
                            <span>회원가입</span>
                        </a>
                    </div>
                    <div class="findPassword">
                        <a href="find_password.html"><span>비밀번호 찾기</span></a>
                    </div>
                </div>
                <div class="card-footer loginFooter"></div>
            </form>
        </div>
    </section>
</body>
</html>

<script>
    /*
     * 현재 로그인 상태 유지는 처리하지 않음
     */

    function onSuccess() {
        alert("로그인되었습니다.");
        window.history.back();
    }

    function onFail(errCode, errMsg) {
		console.log("login.html 로그인 실패 : ", errCode, errMsg);
		alert(errCode + "  [" + errMsg + "]");
    }

    function onSubmit(e) {
        e.preventDefault();

        var email = document.getElementById("email");
        var password = document.getElementById("password");

        if ( !email.value || email.value.trim()=='' ) {
            alert("이메일을 입력해주세요");
            email.focus();
            return;
        }

        if ( !password.value || password.value.trim()=='' ) {
            alert("비밀번호를 입력해주세요");
            password.focus();
            return;
        }

        LOGIN_INFO.login(email.value, password.value, onSuccess, onFail);


    }
    document.getElementById("loginForm").addEventListener("submit", onSubmit);



</script>

