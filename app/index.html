<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="robots" content="index, follow">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="author" content="https://github.com/aaa/">
    <title>덴탈플러스</title>

    <script type="text/javascript" src="js/express-useragent.js"></script>
    <script>
        var userAgent = new UserAgent().parse(navigator.userAgent);
        if( userAgent.isMobile ) location = "liveboard.html";
        if ( userAgent.browser === "IE" && parseInt(userAgent.version) <= 10 ) { 
            alert("웹 보안 및 표준 준수를 위해 익스플로어 하위 버젼은 지원하지 못합니다. 확인 버튼을 누르고 브라우져 최신 버젼 업데이트 후 이용해주세요.");
            location = "ie_should_update.html";
        }
        console.log("접속 브라우져: %s, 브라우져 버젼: %s",userAgent.browser, userAgent.version);

    </script>
    <script src="js/jquery-1.12.4.min.js"></script>
    <!-- <script src="js/handlebars.min.js"></script> -->
    <script src="js/handlebars-v4.0.11.js"></script>
    <script src="js/swiper.min.js"></script>    <!-- Swiper JS -->
    <script src="js/common.js"></script>

    <link href="css/fontawesome/css/fontawesome-all.css" rel="stylesheet"> <!-- font awesome 5.* pro -->
    <link rel="stylesheet" href="css/swiper.min.css">   <!-- Link Swiper's CSS -->
    <link rel="stylesheet" href="css/dentalBasic.css">
</head>
<body>
    
    <header>
        <section class="header-gnb navbar">
            <div class="navbar-section">
            </div>
            <div class="navbar-section" style="color: #0083cb;">
                <a href="login.html" class="gnb-login">로그인</a>
                <a href="signup.html" class="gnb-download">회원가입</a>
                <a href="#" class="gnb-alert-setting">앱다운로드</a>
                <a href="#" class="gnb-cs-center">고객센터</a>
            </div>
        </section>
        <section class="header-main navbar">
            <div class="navbar-section">
                <!-- 브랜드 로고 -->
                <a href="/dentiq-web/app/" class="navbar-brand" style="color: #0083cb">Dental+</a>
            </div>
            <div class="navbar-center">
                <input type="search" name="main-search">
            </div>
            <div class="navbar-section">
                <!-- 사이드바 버튼 -->
                <a href="#" class="btn btn-link btn-action"><i class="icon icon-location"></i></a>
                <a href="#" class="btn btn-link btn-action"><i class="icon icon-people"></i></a>
            </div>
        </section>
        <section class="header-sub">
            <div class="navbar">
                <div class="navbar-section">
                    <a href="liveboard.html" class="">라이브보드</a>
                    <a href="liveboard.html?INTEREST" class="">관심지역</a>
                    <a href="liveboard.html?HOME" class="">우리동네</a>
                    <a href="#" class="">마감임박</a>
                </div>
                <div class="navbar-section">
                        <a href="register_resume.html" class="">이력서 등록</a>
                        <a href="register_jobad.html" class="">채용공고 등록</a>
                    </div>
            </div>
        </section>
    </header>
    <div class="dental-pc-wrapper">
        <!-- <section class="main-top">
            <div class="main-lbox">
                <div class="lbox-banner">
                    메인배너
                </div>
                <div class="lbox-btm">
                    <div class="main-nav">
                        <div class="main-nav-header h5">지역별 채용정보</div>
                        <a href="#"><span class="nav-sido">서울</span></a>
                        <a href="#"><span class="nav-sido">부산</span></a>
                        <a href="#"><span class="nav-sido">인천</span></a>
                        <a href="#"><span class="nav-sido">대구</span></a>
                        <a href="#"><span class="nav-sido">광주</span></a>
                        <a href="#"><span class="nav-sido">대전</span></a>
                        <a href="#"><span class="nav-sido">울산</span></a>
                        <a href="#"><span class="nav-sido">경기</span></a>
                        <a href="#"><span class="nav-sido">강원</span></a>
                        <a href="#"><span class="nav-sido">충북</span></a>
                        <a href="#"><span class="nav-sido">충남</span></a>
                        <a href="#"><span class="nav-sido">전북</span></a>
                        <a href="#"><span class="nav-sido">전남</span></a>
                        <a href="#"><span class="nav-sido">경북</span></a>
                        <a href="#"><span class="nav-sido">경남</span></a>
                        <a href="#"><span class="nav-sido">제주</span></a>
                        <a href="#"><span class="nav-sido">세종</span></a>
                        <a href="#"><span class="nav-sido">전국</span></a>
                    </div>
                    <div class="main-nav">
                        <div class="main-nav-header h5">업무별 채용정보</div>
                        <a href="#"><span class="nav-task">진료실</span></a>
                        <a href="#"><span class="nav-task">데스크</span></a>
                        <a href="#"><span class="nav-task">상담</span></a>
                        <a href="#"><span class="nav-task">보험청구</span></a>
                        <a href="#"><span class="nav-task">치과내 기공실</span></a>
                        <a href="#"><span class="nav-task">치과기공소</span></a>
                        <a href="#"><span class="nav-task">관리/경영</span></a>
                        <a href="#"><span class="nav-task">치과 의사</span></a>
                        <a href="#"><span class="nav-task">기타</span></a>
                    </div>
                    <div class="main-nav col-4">
                        <div class="main-nav-header h5">채용부문별 채용정보</div>
                        <a href="#"><span class="nav-area">치위생사</span></a>
                        <a href="#"><span class="nav-area">간호조무사</span></a>
                        <a href="#"><span class="nav-area">치기공사</span></a>
                        <a href="#"><span class="nav-area">보험청구사</span></a>
                        <a href="#"><span class="nav-area">코디네이터</span></a>
                        <a href="#"><span class="nav-area">상담실장</span></a>
                        <a href="#"><span class="nav-area">치과의사</span></a>
                        <a href="#"><span class="nav-area">기타</span></a>
                    </div>
                </div>
            </div>
            <div class="main-rbox">
                <div class="login-box">
                    <label class="form-switch"><input type="checkbox" hidden><i class="form-icon"></i></label>
                    <div class="login-input col-8">
                        <input type="text" name="" class="" placeholder="아이디">
                        <input type="text" name="" class="" placeholder="비밀번호">
                        <div class="login-btn">
                            <a href="login.html?returnUrl=` + currentHref + `">로그인</a>
                        </div>  
                    </div>
                    <div>
                        <span>회원가입</span>
                        <span>아이디/비밀번호 찾기</span>
                        <span>My메뉴</span>
                    </div>
                </div>
                <div class="rbox-banner">
                    프라임 배너
                </div>
            </div>
        </section> -->
        <section>
        <section class="main-top">
            <style>
                .main-top input[name=attr]:checked + span.chip { background-color: #0083cb; color: #FFF; }
            </style>
            <div class="main-lbox">
                <div class="lbox-banner">메인 Top 영역</div>
                <h3>LIVE Filter</h3>
                <form id="searchForm">
                    <div class="lbox-btm">
                        <div class="main-nav">
                            <div class="main-nav-header h5">지역</div>
                            <label><input type="radio" name="sidoCode" value="" checked>전국</label>
                            <label><input type="radio" name="sidoCode" value="11">서울</label>
                            <label><input type="radio" name="sidoCode" value="26">부산</label>
                            <label><input type="radio" name="sidoCode" value="27">대구</label>
                            <label><input type="radio" name="sidoCode" value="28">인천</label>
                            <label><input type="radio" name="sidoCode" value="29">광주</label>
                            <label><input type="radio" name="sidoCode" value="30">대전</label>
                            <label><input type="radio" name="sidoCode" value="31">울산</label>
                            <label><input type="radio" name="sidoCode" value="36">세종</label>
                            <label><input type="radio" name="sidoCode" value="41">경기</label>
                            <label><input type="radio" name="sidoCode" value="42">강원</label>
                            <label><input type="radio" name="sidoCode" value="43">충북</label>
                            <label><input type="radio" name="sidoCode" value="44">충남</label>
                            <label><input type="radio" name="sidoCode" value="45">전북</label>
                            <label><input type="radio" name="sidoCode" value="46">전남</label>
                            <label><input type="radio" name="sidoCode" value="47">경북</label>
                            <label><input type="radio" name="sidoCode" value="48">경남</label>
                            <label><input type="radio" name="sidoCode" value="50">제주</label>
                        </div>
                        <div id="divJobAdAttrSelector" style="display: flex; overflow-y: auto;"></div>
                        <script id="jobAdAttrSelectorTemplate" type="text/x-handlebars-template">
                            {{#each .}}
                                <div class="main-nav">
                                    <div class="filter-title"><i class="fas fa-hospital"style="margin-right: 10px;"></i>{{text}}</div>
                                        <label class="filter-{{group}}"><input id="attr-{{group}}" type="checkbox" name="attr" value="" data-checkbox-group="{{group}}"  hidden><span class="chip">전체</span></label>
                                        {{#each element}}
                                            <label class="filter-{{group}}"><input id="attr-{{value}}" type="checkbox" name="attr" value="{{value}}"  data-checkbox-group="{{group}}"  hidden><span class="chip">{{text}}</span></label>
                                        {{/each}}
                                </div>
                            {{/each}}
                        </script>
                        <script>
                            document.getElementById("divJobAdAttrSelector").innerHTML = 
                                Handlebars.compile(document.getElementById("jobAdAttrSelectorTemplate").innerHTML)(CODE_CONTAINER.getAttrs());
                        </script> 
                    </div>
                </form>
            </div>
            <script>
                // 지역 변경 시 SUBMIT
                $(".main-top").on("click", "input[name=sidoCode]", function(e) {
                    $("#searchForm").submit();
                });

                // 공고 속성 변경시, 칩을 표시하고, submit
                function afterChangedAttrCheckboxes() {
                    // renderAttrChips();
                    $("#searchForm").submit();
                }

                // 공고 속성들을 그룹별로 '전체'와 묶어 준다.
                var checkboxGroup = new DynamicCheckboxGroup(document.getElementById("searchForm"), "attr", afterChangedAttrCheckboxes);
                checkboxGroup.check();  // 초기값 세팅 (지금은 모두 '전체'로)
            </script>
        </section>
        <!-- 사이드바 -->
        <!-- <div id="sidebar" class="aside-menu-box">  
            <ul class="menu">
                <li class="menu-item">
                    <div class="tile tile-centered">
                      <div class="tile-icon"><img src="img/avatar-4.png" class="avatar" alt="Avatar"></div>
                      <div class="tile-content">Lee, Juhyun@gmail.com</div>
                    </div>
                </li>
                <li class="divider" data-content="개인회원"></li>
                <li class="menu-item">
                    <div class="menu-badge"><label class="label label-primary">설정하러가기</label></div>
                    <a href="a.html#installation">관심 지역</a>
                </li>
                <li class="menu-item">
                    <div class="menu-badge"><span>(채용중/병원수)</span><label class="label label-primary">2/30</label></div>
                    <a href="a.html#installation">우리 동네</a>
                </li>
                <li class="menu-item">
                    <div class="menu-badge"><label class="label label-primary">설정하러가기</label></div>
                    <a href="a.html#installation">관심 병원</a>
                </li>
                <li class="menu-item">
                    <div class="menu-badge"><label class="label label-primary">스크랩없음</label></div>
                    <a href="a.html#installation">내 스크랩</a>
                </li>
                <li class="menu-item"><a href="a.html">이력서 관리</a></li>
                <li class="divider" data-content="병원회원"></li>
                <li class="menu-item"><a href="b.html">우리병원 기본 정보</a></li>
                <li class="menu-item"><a href="b.html#carousels">채용공고 등록</a></li>
                <li class="menu-item"><a href="b.html#carousels">채용공고 관리</a></li>
                <li class="menu-item">
                    <div class="menu-badge"><label class="label label-primary">2</label></div>
                    <a href="b.html#carousels">면접 제안</a>
                </li>
                <li class="menu-item">
                    <div class="menu-badge"><label class="label label-primary">2</label></div>
                    <a href="b.html#carousels">지원자 관리</a>
                </li>
                <li class="divider"></li>
                <li class="menu-item"><a href="#menus">로그인</a></li>
                <li class="menu-item"><a href="#menus">회원가입</a></li>
                <li class="menu-item"><a href="#menus">로그아웃</a></li>
                <li class="menu-item"><a href="#menus">설정</a></li>
            </ul>
        </div> -->


        <!-- ======================== 프리미어 공고 ======================== -->
        <section id="section-premiereAds" class="premiere-ad">
            <div class="jobpost-list-bar">
                    <span class="typo-title2">프리미어 채용정보</span>
                    <span class="jobpost-list-bar-counter" id="countOfPremierAds">0</span>
            </div>
            <div class="my-swiper-area" id="premierJobAdsSwipeArea"></div>
            <script id="premierJobAdsSwipeTemplate" type="text/x-handlebars-template">

                <div class="swiper-container">
                    <div class="swiper-wrapper">

                        {{#each .}}
                        <div class="swiper-slide">
                            <div class="premiere-ad-box columns" id="premierJobAdsList">

                                {{#each .}}			
                                <div class="column col-4 card">
                                    <a href="jobad.html?jobAdId={{jobAdId}}">
                                        <div class="hospital-log-box"><div class="logo-frame-hospital"><img src="{{hospital.logoImageUrl}}"></div></div>
                                        <div class="card-header">
                                            <div class="card-title">{{hospital.hospitalName}}</div>
                                            <div class="card-subtitle">{{title}}</div>
                                        </div>
                                        <div class="card-body">
                                            <div class="dental-info">
                                                <span class="info-detail">{{renderLocationOfJobAdCard hospital.location.locationCode}}</span>
                                                <span class="info-detail">{{hiringEndDate}} ({{hiringEndDateDay}})</span>
                                            </div>
                                            <div class="dental-info">{{{renderAttrOnCard attr}}}</div>
                                        </div>
                                    </a>
                                    <span class="btn-icon d-dots-v" data-action="popupActionPanel" data-action-value-job-ad-id="{{jobAdId}}" data-action-value-tel-no="{{hospital.hospitalTelNo}}" ></span>
                                </div>
                                {{/each}}


                            </div>
                        </div>
                        {{/each}}

                    </div>
                </div>
            </script>
        </section>

        <!-- ======================== 일반 공고 ======================== -->
        <section id="section-generalAds" class="jobpost-list">
            <div class="jobpost-list-bar">
                <span class="typo-title2">라이브 채용정보</span>
                <span class="jobpost-list-bar-counter" id="countOfGeneralAds">0</span>
            </div>
            <div class="jobpost-list-body" id="generalJobAdsList"></div>
            <script id="generalJobAdsTemplate" type="text/x-handlebars-template">
                {{#each .}}
                <div class="jobpost-list-card">
                    <a href="jobad.html?jobAdId={{jobAdId}}">
                        <div class="jobpost-list-card-header">
                            <div class="jobpost-list-card-title">{{hospital.hospitalName}}</div>
                            <div class="jobpost-list-card-subtitle">{{title}}</div>
                        </div>
                        <div class="jobpost-list-card-body">
                            <div class="dental-info">
                                <span class="info-detail hospital-region">{{renderLocationOfJobAdCard  hospital.location.locationCode}}</span>
                                <span class="info-detail"><span class="jobpost-list-card-chip jobpost-date">{{renderMslashD hiringEndDate}}</span></span>
                                <span class="info-detail subway-line">
                                    <span class="subway102"><i></i></span> <!-- 지하철 작업하면서 클래스 대신 data-tag 로 변경 필요, 검토해주세욧 -->
                                    <span class="subway117"><i></i></span> <!-- 'span.info-detail' 하위에 span 이 3개 이상이면 i 태그에 "외" 삽입됨 -->
                                    <span>서울 3호선<i></i></span> <!-- 3개부터는 안보임, css 로 display:none 처리 -->
                                    <span class="subway120"><i></i></span> <!-- 텍스트가 들어오면 그냥 텍스트로 노출됨, 노출되는 개수 등 그 외 로직은 그대로 적용-->
                                </span>
                                <!-- 시도, 시구군 정보, 교통정보 -->
                                <span class="info-detail">
                                    {{#each hashTag}}
                                        <span>#{{.}}<i></i></span>
                                    {{/each}}
                                </span>
                                <!-- 주변 핫플레이스 -->
                            </div>
                            <div class="dental-info">{{{renderAttrOnCard attr}}}</div>
                        </div>
                    </a>
                    <span class="btn-icon d-dots-v" data-action="popupActionPanel" data-action-value-job-ad-id="{{jobAdId}}" data-action-value-tel-no="{{hospital.hospitalTelNo}}" ></span>
                </div>
                {{/each}}
            </script>
        </section>
    </div>
    <footer class="container">
        FOOTER
    </footer>
    <script src="js/dental_ui.js"></script>
    <script>

        Handlebars.registerHelper("eachNested", function(context, options) {
            console.log("HELPER : eachNested ");
        
            var ret = "";
            for(var i=0, j=context.length; i<j; i++) {
                if ( i%4==0 ) {
                    console.log("잡혔음 : ", i);
                }
        
                ret = ret + options.fn(context[i]);
            }
        
            return ret;
        
        });
        
        
        
        // 속도가 빠름. 그러나 ordering 안 됨 ==> 입력할 때의 ordering을 의지한다 ㅠㅠ
        function renderAttrOnCard2(attrList) {
            if ( attrList==null || attrList.length==0 ) return "";
        
            var target = {};
        
            var defAttrMap = CODE_CONTAINER.getAttrMap();
            attrList.forEach(function(attr) {
                var attrGroupName = attr.split(".")[0];
                if ( defAttrMap[attrGroupName] && defAttrMap[attrGroupName].element[attr] ) {
                    // 
                    if ( !target[attrGroupName] ) {
                        target[attrGroupName] = {};
                        target[attrGroupName].order = defAttrMap[attrGroupName].order;
                        target[attrGroupName].element = {};
                    }
                    target[attrGroupName].element[attr] = defAttrMap[attrGroupName].element[attr];
                }
            });
            
            return target;
        }
        
        // 속도 느림. 그러나 ordering 됨
        function renderAttrOnCard(attrList) {
            if ( attrList==null || attrList.length==0 ) return "";
        
            var html = "";
        
            var defAttrGroupList = CODE_CONTAINER.getAttrs();
            defAttrGroupList.forEach(function(defAttrGroup) {
                html += '<span class="info-detail">';
                defAttrGroup.element.forEach(function(defAttr) {
                    var defAttrValue = defAttr.value;
        
                    attrList.forEach(function(attr) {
                        if ( defAttrValue == attr ) {
                            html += "<span>" + defAttr.text + "<i></i></span>";
                        }
                    });
                });
                html += '</span>';
            });
        
            return html;
        }
        
        
        
        var LiveBoardApp = (function() {

            console.log("client Width Check: ", returnClientWidth () );

       
            /******************************************************************************/
            /* 스크랩 / 지원 / 전화 걸기 ACTION PANEL에 대한 Event 부착
            /******************************************************************************/
            var JOB_SEEKER_JOB_AD_ACTION_PANNEL = new JobSeekerJobAdActionPanel();
            
            document.querySelectorAll(".jobpost-list-body").forEach(function(element) {
                console.log("이벤트 걸었음 ", element);
                element.addEventListener("click", JOB_SEEKER_JOB_AD_ACTION_PANNEL.onClickActionButton);
            });
            
            document.querySelectorAll(".premiere-ad-box").forEach(function(element) {
                console.log("이벤트 걸었음 ", element);
                element.addEventListener("click", JOB_SEEKER_JOB_AD_ACTION_PANNEL.onClickActionButton);
            });
        
            
        
        
        
        
            /******************************************************************************/
            /* 공고 카드 템플릿 Helper
            /*
            /******************************************************************************/
            Handlebars.registerHelper("renderLocationOfJobAdCard", function(code) {
                //console.log("LOCATION_HELPER ", code);
                var location = LOCATION_CODE.getByName(code);
                if ( location ) return location.sidoName + " > " + location.siguName ;
                else return "입력안됨";
            });
            Handlebars.registerHelper("renderAttrOnCard", function(code) {
                //console.log("renderAttrOnCard ", code);
                return renderAttrOnCard(code);
            });
            // Handlebars.registerHelper("renderHospitalLogoImage", function(hospitalId, flag) {
            // 	console.log("renderHospitalLogoImage ", hospitalId, flag);
            // 	if ( flag ) return CONSTANTS.getHospitalLogoImageUrl(hospitalId);
            // });
        
            Handlebars.registerHelper("renderMslashD", function(hiringEndDate) {
                if (!hiringEndDate) return "";
                return renderMslashD(hiringEndDate);
            });
        
        
        
        
            /******************************************************************************/
            /* <ul class="liveplus-breadcrumb breadcrumb"> 영역 처리
            /*
            /******************************************************************************/
            function resetClickDivLiveBoardSidoLabel() {
                var sidoCodeCheckboxes = document.querySelectorAll("input[type=checkbox][name='sidoCode']:checked");
                sidoCodeCheckboxes.forEach(function(element) {
                    element.checked = false;
                });
        
                var sidoCodeCheckboxes = document.querySelectorAll("input[type=checkbox][name='siguCode']:checked");
                sidoCodeCheckboxes.forEach(function(element) {
                    element.checked = false;
                });
            }
        
            var GENERAL_JOB_ADS_PER_PAGE = 10;			// 스크롤 사이즈 (한 페이지에서 보여질 아이템 개수)
            var SCROLL_LOCK = false;                    // 페이지 스크롤 LOCK
        
            var totalCountOfGeneralJobAds = 0;          // 전체 일반 공고 개수
            var totalCountOfPremierJobAds = 0;			// 프리미어 공고 개수
            var lastPageNo = 1;                         // 최근 조회 페이지
            var lastQueryString;                        // 최종 Query String
        
            var BASE_SIDO_CODE = null;				// 현재 선택된 시도 코드
            
        
            /******************************************************************************/
            /*  프리미어 공고 로딩 및 출력
            /*  
            /*******************************************************************************/
            // var premierJobAdsTemplate = document.getElementById("premierJobAdsTemplate").innerHTML;
            // var premierJobAdsTemplateCompiled = Handlebars.compile(premierJobAdsTemplate);
        
            var premierJobAdsSwipeTemplate = document.getElementById("premierJobAdsSwipeTemplate").innerHTML;
            var premierJobAdsSwipeTemplateCompiled = Handlebars.compile(premierJobAdsSwipeTemplate);
        
            function listPremierJobAds(_queryParamString) {
        
                var searchParam = "adType=2&pageSize=5&" + _queryParamString; // 프리미어 광고 유형 추가      // adType=2 프리미어 공고
                console.log("listPremierJobAds : searchParam:", searchParam);
                callApi("GET", "/api/jobAd/", searchParam,
                    function(jobAdList) {
        
                        //if ( !jobAdList || jobAdList<1 ) return;
        
        
                        var bunchOfJobAds = [];
                        for ( var i=0; i<jobAdList.length;) {
                            //console.log("큰 루프 : ", i, "   ===> ", i%4);
                            var subBunchOfJobAds = [];
        
                            for ( var j=0; j<6 && i<jobAdList.length; j++ ) {
                                //console.log("현재 : ", i, " ==> ", i%4);
                                subBunchOfJobAds.push(jobAdList[i]);
                                i++;
                            }
        
                            //console.log("서브 루프 탈출 : ", i);
                            bunchOfJobAds.push(subBunchOfJobAds);
        
                        }
                        console.log("결과 : ", bunchOfJobAds);
        
                        var itemList = premierJobAdsSwipeTemplateCompiled(bunchOfJobAds);
                        $('#premierJobAdsSwipeArea').html(itemList);
        
                        // var swiper = new Swiper('.swiper-container');
                        var swiper = new Swiper('.swiper-container', {
                            autoHeight: true, //enable auto height
                            spaceBetween: 20,
                            pagination: {
                                el: '.swiper-pagination',
                                clickable: true,
                            },
                            navigation: {
                                nextEl: '.swiper-button-next',
                                prevEl: '.swiper-button-prev',
                            },
                        });        
                        // var itemList = premierJobAdsTemplateCompiled(jobAdList);
                        // $('#premierJobAdsList').html(itemList);
        
                        //renderScrapCheckbox();		// 스크랩된 공고에 별표시
                        //renderAppliedCheckbox();	// 지원상태를 표시
                    },
                    function(errorCode, errorMsg) {
                        console.log("에러 1 [" + errorCode + "] ==> [" + errorMsg + "]");
                        alert("에러 1 [" + errorCode + "] ==> [" + errorMsg + "]");
                    }
                );
            }
        
        
        
            /******************************************************************************/
            /*  일반 공고 로딩 및 출력
            /*  
            /*******************************************************************************/
            var generalJobAdsTemplate = document.getElementById("generalJobAdsTemplate").innerHTML;
            var generalJobAdsTemplateCompiled = Handlebars.compile(generalJobAdsTemplate);
        
            function listGeneralJobAds(_pageNo, _queryParamString) {
        
                if (SCROLL_LOCK) {
                    console.log("SCROLL LOCKED - in JS");
                    setTimeout(function() {
                        SCROLL_LOCK = false;
                        console.log("listJobAds:SCROLL_LOCK 풀렸음");
                    }, 500);
                    return;
                }
                SCROLL_LOCK = true;
        
        
                console.log('listGeneralJobAds CALLED. _pageNo:', _pageNo);
                if (_pageNo == null) pageNo = 1;
                else pageNo = _pageNo;
        
                //var searchParam = searchCondition.toQueryString(pageNo);
                var searchParam = "adType=1&pageNo=" + pageNo + "&" + _queryParamString;    // adType=1 일반 공고
                console.log("searchParam:", searchParam);
                callApi("GET", "/api/jobAd/", searchParam,
                    function(jobAdList) {
                        lastPageNo = pageNo; // 최근 페이지 번호를 변경한다.
        
                        //console.log(generalJobAdsTemplate);
                        var itemList = generalJobAdsTemplateCompiled(jobAdList);
        
                        if (pageNo != null && pageNo > 1) $('#generalJobAdsList').append(itemList);
                        else $('#generalJobAdsList').html(itemList);
        
                        
                        //renderScrapCheckbox();		// 스크랩된 공고에 별표시
                        //renderAppliedCheckbox();	// 지원상태를 표시
        
                        SCROLL_LOCK = false;
                    },
                    function(errorCode, errorMsg) {
                        console.log("에러 1 [" + errorCode + "] ==> [" + errorMsg + "]");
                        alert("에러 1 [" + errorCode + "] ==> [" + errorMsg + "]");
                        SCROLL_LOCK = false;
                    }
                );
        
            }
            /******************************************************************************/
            /*  스크롤했을 때, 일반 공고에 대한 append 처리
            /*  
            /*******************************************************************************/
            $(window).scroll(function() {
                if (totalCountOfGeneralJobAds == 0) return;
        
                var maxPageNo = totalCountOfGeneralJobAds / GENERAL_JOB_ADS_PER_PAGE + 1; // 한 페이지에 10개의 목록 지정 (개수 조정 시 변경 필요)
                if ((lastPageNo + 1) >= maxPageNo) return;
        
                if (SCROLL_LOCK) {
                    console.log("SCROLL : LOCKED");
                    setTimeout(function() {
                        SCROLL_LOCK = false;
                        console.log("SCROLL_LOCK 풀렸음");
                    }, 500);
                    return;
                }
        
                if (Math.ceil($(window).scrollTop()) >= ($(document).height() - $(window).height() * 3)) {
                    listGeneralJobAds(lastPageNo + 1, lastQueryString);
                }
            });
        
        
            
        
            /******************************************************************************/
            /*  
            /*		라이브보드 / 관심지역 / 우리동네 공통 : 요약보드 및 공고 리스트 생성
            /*  
            /******************************************************************************/
            function createSummary(queryParamString) {
                
                console.log("검색 : ", queryParamString);
                console.log("+++++++++++++++++++++++++++++++++++++ BASE_SIDO_CODE : ", BASE_SIDO_CODE);
        
        
                var summaryApiUrl = "/api/jobAd/summary/";
                var queryParamStringForSummary = queryParamString;
                // if ( ACTION_TYPE=="INTEREST" || ACTION_TYPE=="HOME" ) {		// 개인화 화면이므로, 세션 체크 필요함.
        
                //     if ( !LOGIN_INFO.isLoggedIn() ) {
                //         alert("로그인이 필요합니다.");
                //         location.href = "login.html?";
                //         return;
                //     }
        
                //     if (!LOGIN_INFO.isPersonalMember() ) {
                //         alert("개인회원만 이용 가능합니다.");
                //         location.href = "liveboard.html?LIVEBOARD";
                //         return;
                //     }
        
        
                //     // document.getElementById("divLiveBoardSidoLabel").style.display="none";		// 전국/시도 선택 영역 보이지 않게 함.
        
                //     // if ( ACTION_TYPE=="INTEREST" ) {
                //     //     summaryApiUrl = "/api/user/" + LOGIN_INFO.getId() + "/interestLocationSummary/";			
                //     // } else if ( ACTION_TYPE=="HOME" ) {
                //     //     summaryApiUrl = "/api/user/" + LOGIN_INFO.getId() + "/homeLocationSummary/";
                //     // }
                
                // } else {
                //     document.getElementById("divLiveBoardSidoLabel").style.display="";			// 전국/시도 선택 영역 보이게 함
                //     summaryApiUrl = "/api/jobAd/summary/";
                //     if ( BASE_SIDO_CODE ) {			// 참고 : 서버의 JobAdSummary 클래스
                //         queryParamStringForSummary = "sidoCode="+BASE_SIDO_CODE+"&" + queryParamString;
                //     }
                
                // }
        
        
                callApi("GET", summaryApiUrl, queryParamStringForSummary,
                    function(resData) {

                        // 공고 리스트부터 먼저 만들자. 조금이라도 시간이 빠르게...
                        lastQueryString = parseJsonToParamString("", resData.condition);		// 조회된 검색 조건으로 LIST 출력용 query string을 생성
                        listPremierJobAds(lastQueryString);										// 프리미어 공고 리스트 업데이트
                        listGeneralJobAds(1, lastQueryString);									// 일반 공고 리스트 업데이트
        

                        // if ( ACTION_TYPE != "HOME" ) {	// LIVEBOARD와 INTEREST는 지역별 요약을 보여주어야 하고, HOME은 지역별 요약이 없음
        
                        //     var htmlStr = "";					
                        //     resData.locationList.forEach(function(item) {
        
                        //         var requestedChecker = "";
                        //         if ( item.requested ) requestedChecker = " checked ";
        
                        //         if ( item.locationType ) {			// 전체(대한민국 시도들)인 경우
                        //             htmlStr += `<label><input type="checkbox" name="sidoCode" value="${item.sidoCode}" ${requestedChecker} >${item.locationName}</label>`;
                                                    
                        //         } else if ( item.locationType=='2' ) {	// 특정 시도를 선택해서, 해당 시도의 시구들인 경우
                        //             if ( ACTION_TYPE=="INTEREST" )
                        //                 htmlStr += `<label class="my-local-label col-4"><input type="checkbox" name="siguCode" value="${item.siguCode}" hidden ${requestedChecker} ><div class='my-local-item'><span class='my-local-item-sido'>${item.sidoName}<span class='my-local-item-cnt'>${item.cnt}</span></span><span class='my-local-item-sigu'>${item.siguName}</span></div></label>`;
                        //             else
                        //                 htmlStr += `<label class="local-label col-3"><input type="checkbox" name="siguCode" value="${item.siguCode}" hidden ${requestedChecker} ><div class='local-item'><span class='local-item-name'>${item.siguName}</span><span class='local-item-cnt'>${item.cnt}</span></div></label>`;
                        //         }
                        //     });
                        //     document.getElementById("searchForm").innerHTML = htmlStr;
                            
                        //     // 만일 siguCode checkbox가 모두 check되어 있는 경우에는, 모두 false로 표시해 준다.
                        //     var siguCodeCnt = document.querySelectorAll("input[name='siguCode']").length;
                        //     var checkedSiguCodeCnt =  document.querySelectorAll("input[name='siguCode']:checked").length;
                        //     if ( siguCodeCnt == checkedSiguCodeCnt ) {
                        //         document.querySelectorAll("input[name='siguCode']").forEach(function(siguCheckbox) {
                        //             siguCheckbox.checked = false;
                        //         });
                        //     }
                        
                        //     if ( resData.condition && resData.condition.baseSidoCode ) {
                        //         document.getElementById("currentLocationSidoLabel").innerText = LOCATION_CODE.getByName(resData.condition.baseSidoCode).sidoName;									
                        //         BASE_SIDO_CODE = resData.condition.baseSidoCode;
                        //     } else if ( resData.condition && resData.condition.sidoCode ) {
                        //         document.getElementById("currentLocationSidoLabel").innerText = LOCATION_CODE.getByName(resData.condition.sidoCode).sidoName;									
                        //         BASE_SIDO_CODE = resData.condition.sidoCode;
                        //     } else {
                        //         document.getElementById("currentLocationSidoLabel").innerText = "";
                        //         BASE_SIDO_CODE = null;
                        //     }
                        // }
        
                        // 일반/프리미어/전체 공고 건수 세팅 및 화면 표시
                        if ( resData.adTypeList["1"] )	totalCountOfGeneralJobAds = resData.adTypeList["1"];		// 1: 일반 공고
                        else							totalCountOfGeneralJobAds = 0;
                        document.getElementById("countOfGeneralAds").innerText = totalCountOfGeneralJobAds;
        
                        if ( resData.adTypeList["2"] )	totalCountOfPremierJobAds = resData.adTypeList["2"];		// 2: 프리미어 공고
                        else							totalCountOfPremierJobAds = 0;
                        document.getElementById("countOfPremierAds").innerText = totalCountOfPremierJobAds;
        
                        // if ( resData.totalCnt )	document.getElementById("countOfTotalAds").innerText = resData.totalCnt;	// 전체 공고 개수
                        // else					document.getElementById("countOfTotalAds").innerText = "0";
                    
                    },
                    function(errorCode, errorMsg) {
                        alert("에러 [" + errorCode + "] ==> [" + errorMsg + "]");
                    }
                );
        
                
                
            }
        
        
        
        
        
            /******************************************************************************/
            /*  submit에 대한 후킹 처리
            /*  서버사이드 제너레이션인 경우에는 이 이벤트 핸들러 주석 처리
            /*******************************************************************************/
            $("#searchForm").submit(function(e) {
                e.preventDefault();
                processSubmit(this);
            });
        
            
            /*******************************************************************************/
            /*  submit을 ajax처리로 변환 및 history 관리
            /*******************************************************************************/
            function processSubmit(form) {
        
                console.log("SUBMIT");
        
                var action = form.action; // FORM의 action
                var paramString = $(form).serialize(); // FORM의 Query Parameters
                       
                console.log("submit 대체 ", action, " params=", paramString);
                
                boardMain(paramString);
            }
        
        
        
            var ACTION_TYPE = "";
        
            function boardMain(paramString) {
                console.log("boardMain 분기 처리 ", ACTION_TYPE, " ===> ", paramString);
                createSummary(paramString);
            }
        
        
            /******************************************************************************/
            /*  페이지가 로드된 직후에 실행됨.
            /*  검색엔진에 노출되기 위하여 GET 방식 처리를 수행함
            /*******************************************************************************/
            function initPage() {
                var arr = (document.location + '').split('?');
                console.log("페이지 요청 URL : ", arr);
                if (arr.length == 1) { // 파라미터 없이 직접 호출된 경우
                    boardMain();
                } else if (arr.length == 2) { // 파라미터와 함께 호출된 경우	
                    
                    if ( !arr[1] )														ACTION_TYPE="LIVEBOARD";
                    else if ( containsSpecificParamInParamString(arr[1], "INTEREST") )	ACTION_TYPE="INTEREST";
                    else if ( containsSpecificParamInParamString(arr[1], "HOME") )		ACTION_TYPE="HOME";
                    else																ACTION_TYPE="LIVEBOARD";
        
                    boardMain(arr[1]);
        
                } else { // 파라미터 시작인 '?'가 2개 이상인 경우
                    console.log("ERROR : 페이지 호출 시 '?'가 2개 이상임.");
                    return;
                    // search();
                }
            }
        
            initPage();
        
        
            // HTTP GET Query 문자열에서 특정 파라미터가 포함되어 있는지 확인한다.
            function containsSpecificParamInParamString(paramString, paramToBeSearch) {
                if ( !paramString ) return false;
        
                var tokens = paramString.split("&");
                for ( var i=0; tokens && i<tokens.length; i++ ) {
                    var paramName = tokens[i].split("=")[0];
                    if ( paramName == paramToBeSearch ) return true;
                }
        
                return false;
            }
        
            function parseJsonToParamString(paramName, jsonObj) {
                //console.log("**** CALLLED parseJsonToParamString ", paramName, " : " + jsonObj);
                if ( !jsonObj ) return "";
                
                if ( Array.isArray(jsonObj) ) {
                    //console.log("**** array :: ", paramName, " : ", jsonObj);
                    var result1 = "";
                    for ( var i=0; i<jsonObj.length; i++ ) {
                        result1 += parseJsonToParamString(paramName, jsonObj[i]);
                    }
                    return result1;
        
                } else if ( typeof jsonObj==="string" || typeof jsonObj==="number" ) {
                    //console.log("**** str num :: ", paramName, " : ", jsonObj);
                    return paramName + "=" + jsonObj + "&";
        
                } else if ( typeof jsonObj==="object" ) {
                    //console.log("**** object :: ", paramName, " : ", jsonObj);
                    var result2 = "";
                    var keys = Object.keys(jsonObj);
                    for ( var j=0; j<keys.length; j++ ) {
                        //console.log("\t **** object loop :: ", keys[j], " : ", jsonObj[keys[j]]);
                        result2 += parseJsonToParamString(keys[j], jsonObj[keys[j]]);
                    }
                    return result2;
                    
                } else throw "에러 !!!";
                
            }
        
        })();
        
        </script>    
</body>
</html>
